// Icon.tsx
import type { ComponentType } from "react";

import NavBookmarkIcon from "@/assets/icons/icon-nav-bookmark.svg";
import NavHomeIcon from "@/assets/icons/icon-nav-home.svg";
import NavMoviesIcon from "@/assets/icons/icon-nav-movies.svg";
import NavTVSeriesIcon from "@/assets/icons/icon-nav-tv-series.svg";

// Define props
interface IconProps {
  name:
    | "logo"
    | "bookmarkEmpty"
    | "bookmarkFull"
    | "categoryMovie"
    | "categoryTV"
    | "navBookmark"
    | "navHome"
    | "navMovies"
    | "navTVSeries"
    | "play"
    | "search";
  className?: string;
  alt?: string;
}

// Restrict keys for svgIconMap and imgIconMap
const svgIconMap: Record<
  Extract<
    IconProps["name"],
    "navBookmark" | "navHome" | "navMovies" | "navTVSeries"
  >,
  ComponentType<{ className?: string; "aria-label"?: string }>
> = {
  navBookmark: NavBookmarkIcon,
  navHome: NavHomeIcon,
  navMovies: NavMoviesIcon,
  navTVSeries: NavTVSeriesIcon,
};

const imgIconMap: Record<
  Exclude<
    IconProps["name"],
    "navBookmark" | "navHome" | "navMovies" | "navTVSeries"
  >,
  string
> = {
  logo: new URL("../assets/logo.svg", import.meta.url).href,
  bookmarkEmpty: new URL(
    "../assets/icons/icon-bookmark-empty.svg",
    import.meta.url
  ).href,
  bookmarkFull: new URL(
    "../assets/icons/icon-bookmark-full.svg",
    import.meta.url
  ).href,
  categoryMovie: new URL(
    "../assets/icons/icon-category-movie.svg",
    import.meta.url
  ).href,
  categoryTV: new URL("../assets/icons/icon-category-tv.svg", import.meta.url)
    .href,
  play: new URL("../assets/icons/icon-play.svg", import.meta.url).href,
  search: new URL("../assets/icons/icon-search.svg", import.meta.url).href,
};

export default function Icon({ name, className, alt }: IconProps) {
  if (name in svgIconMap) {
    const SvgIcon = svgIconMap[name as keyof typeof svgIconMap];
    // Use aria-label only if alt or name is defined
    return <SvgIcon className={className} aria-label={alt || name} />;
  }

  const src = imgIconMap[name as keyof typeof imgIconMap];
  if (!src) return null;

  return <img src={src} className={className} alt={alt || name} />;
}
